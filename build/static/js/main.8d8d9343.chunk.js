(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{315:function(e,t,n){e.exports=n(657)},320:function(e,t,n){},325:function(e,t,n){},326:function(e,t,n){e.exports=n.p+"static/media/logo.bc8f3e2a.png"},329:function(e,t,n){},559:function(e,t){},561:function(e,t){},572:function(e,t){},574:function(e,t){},601:function(e,t){},603:function(e,t){},604:function(e,t){},610:function(e,t){},612:function(e,t){},630:function(e,t){},633:function(e,t){},649:function(e,t){},652:function(e,t){},655:function(e,t,n){},657:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(54),l=n.n(c),i=(n(320),n(50)),u=n(22),s=n(87),m=(n(325),n(111)),d=n(190),f=n(114),h=function(e){return o.a.createElement(d.a,{variant:"light",expand:"md",style:{backgroundColor:"white"}},o.a.createElement(d.a.Brand,{className:"mr-auto",href:"#home"},o.a.createElement("img",{src:n(326),width:"150",height:"30",className:"d-inline-block align-top",alt:"Zenroom logo"})),o.a.createElement(f.a,{variant:"outline-success",className:"mr-sm-2",onClick:e.executeZenroom},"Play"),e.isAuthenticated?o.a.createElement("div",null,o.a.createElement(f.a,{variant:"outline-success",className:"mr-sm-2"},"Save"),o.a.createElement(m.b,{to:"/profile"},o.a.createElement(f.a,{variant:"outline-primary",className:"mr-sm-2"},"My Contracts"))):o.a.createElement(f.a,{variant:"outline-primary",className:"mr-sm-2",onClick:e.showLogin},"Login"))},E=n(660),g=n(661),p=function(e){var t=Object(r.useState)(!1),n=Object(i.a)(t,2),a=n[0],c=n[1],l=Object(r.useState)(e.show),u=Object(i.a)(l,2),s=u[0],m=u[1],d=Object(r.useState)(!1),h=Object(i.a)(d,2),p=h[0],v=h[1],b=Object(r.useRef)(null),y=Object(r.useRef)(null),w=Object(r.useRef)(null),O=function(){m(!1),e.showLogin(!1)};return Object(r.useEffect)((function(){e.show&&m(e.show)}),[e.show]),o.a.createElement(E.a,{show:s,onHide:O},o.a.createElement(E.a.Header,{closeButton:!0},p?o.a.createElement(E.a.Title,{className:"ml-5"},"Register"):o.a.createElement(E.a.Title,{className:"ml-5"},"Sign in")),o.a.createElement(E.a.Body,{className:"px-5 pb-1 pt-5"},o.a.createElement(g.a,{ref:w,validated:a,onSubmit:function(t){t.preventDefault(),t.stopPropagation(),c(!0);var n=b.current.value,a=y.current.value;e.auth(n,a,p)}},o.a.createElement(g.a.Group,{controlId:"formBasicEmail"},o.a.createElement(g.a.Control,{ref:b,type:"email",placeholder:"Enter email",required:!0})),o.a.createElement(g.a.Group,{controlId:"formBasicPassword"},o.a.createElement(g.a.Control,{ref:y,type:"password",placeholder:"Password",minLength:"8",required:!0}),o.a.createElement(g.a.Control.Feedback,{type:"invalid"},"Please enter password with min 8 characters.")),o.a.createElement(f.a,{variant:"primary",type:"submit"},p?"Register":"Login"))),o.a.createElement(E.a.Footer,{className:"px-5 pb-3 pt-0",style:{border:0}},o.a.createElement(f.a,{variant:"secondary",onClick:function(){v(!p)}},p?"Login":"Register"),o.a.createElement(f.a,{variant:"secondary",onClick:O},"Cancel")))},v=n(58),b=(n(329),n(139)),y=n.n(b),w=(n(198),n(335),n(337),null),O=0,S=function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null),c=Object(r.useRef)(null),l=Object(r.useState)({first:"80%",second:50,third:50}),u=Object(i.a)(l,2),s=u[0],m=u[1],d=function(e,t){e.stopPropagation(),e.preventDefault(),O=e.clientY,document.addEventListener("mousemove",f),document.addEventListener("mouseup",h),w=!0,a=t},f=o.a.useCallback((function(e){var t=e.clientY-O;switch(O+=t,a){case"second":m((function(e){var n=e.first+t,a=e.second-t;return Object(v.a)(Object(v.a)({},e),{},{first:n,second:a})}));break;case"third":m((function(e){var n=e.second+t,a=e.third-t;return Object(v.a)(Object(v.a)({},e),{},{second:n,third:a})}))}}),[]),h=o.a.useCallback((function(e){w&&(w=!1,O=0,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",h))}),[]);return Object(r.useEffect)((function(){var e=t.current.clientHeight-111;m((function(t){return Object(v.a)(Object(v.a)({},t),{},{first:e})}))}),[]),o.a.createElement("div",{ref:t,style:{width:"100%",height:"100%"}},o.a.createElement("div",{ref:n,style:{height:s.first,width:"100%",position:"relative",backgroundColor:"#e8e8e8"}},o.a.createElement("div",{className:"header-container"},o.a.createElement("h2",null,"Contract")),o.a.createElement("div",{className:"dragger",onMouseDown:function(e){d(e,"first")}}),o.a.createElement(y.a,{mode:"zencode",theme:"github",onChange:function(t){e.contractChanged(t)},name:"UNIQUE_ID_OF_DIV",showPrintMargin:!1,width:"100%",height:(s.first-80).toString()+"px",value:e.contract})),o.a.createElement("div",{ref:c,style:{height:s.second,width:"100%",position:"relative",backgroundColor:"#e8e8e8"}},o.a.createElement("div",{className:"header-container"},o.a.createElement("h3",null,"Keys")),o.a.createElement("div",{className:"dragger",onMouseDown:function(e){d(e,"second")}}),o.a.createElement(y.a,{mode:"json5",theme:"github",onChange:function(t){e.keysChanged(t)},name:"UNIQUE_ID_OF_DIV",showPrintMargin:!1,width:"100%",height:(s.second-70).toString()+"px",value:e.keys})),o.a.createElement("div",{style:{height:s.third,width:"100%",position:"relative",backgroundColor:"#e8e8e8"}},o.a.createElement("div",{className:"header-container"},o.a.createElement("h3",null,"Data")),o.a.createElement("div",{className:"dragger",onMouseDown:function(e){d(e,"third")}}),o.a.createElement(y.a,{mode:"json5",theme:"github",onChange:function(t){e.dataChanged(t)},name:"UNIQUE_ID_OF_DIV",showPrintMargin:!1,width:"100%",height:(s.third-70).toString()+"px",value:e.data})))},k=function(e){return{type:"SET_EXECUTE",execute:e}},T=n(309),x=n.n(T),C=function(e,t){return{type:"AUTH_SUCCESS",idToken:e,userId:t}},j=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),{type:"AUTH_LOGOUT"}},_=function(e){return function(t){setTimeout((function(){t(j())}),1e3*e)}},I=(n(354),n(310)),N=n.n(I),R=Object(s.b)((function(e){return{contract:e.zenroom.contract,keys:e.zenroom.keys,data:e.zenroom.data,execute:e.zenroom.execute}}),(function(e){return{onContractChanged:function(t){return e(function(e){return{type:"SET_CONTRACT",contract:e}}(t))},onKeysChanged:function(t){return e(function(e){return{type:"SET_KEYS",keys:e}}(t))},onDataChanged:function(t){return e(function(e){return{type:"SET_DATA",data:e}}(t))},onResultChanged:function(t){return e(function(e){return{type:"SET_RESULT",result:e}}(t))},onErrorChanged:function(t){return e(function(e){return{type:"SET_RESULT",error:e}}(t))},onExecute:function(t){return e(k(t))}}}))((function(e){var t=Object(r.useState)([]),n=Object(i.a)(t,2),a=n[0],c=n[1],l=Object(r.useState)([]),u=Object(i.a)(l,2),s=u[0],m=u[1];return Object(r.useEffect)((function(){if(e.execute){var t=[],n=[],a={script:e.contract,data:e.data,conf:null,keys:e.keys?JSON.parse(e.keys):null,print:function(e){t.push(e)},print_err:function(e){n.push(e)},success:function(){c((function(){return n.length?n:[]})),m((function(){return t.length?t:[]}))},error:function(){c([]),m([{error:"Error detected. Execution aborted."}])}};N.a.init(a).zencode_exec(),e.onExecute(!1)}}),[e]),o.a.createElement("div",{className:"row justify-content-center flex-grow-1"},o.a.createElement("div",{className:"col-md-6",style:{padding:0}},o.a.createElement(S,{contract:e.contract,contractChanged:e.onContractChanged,keys:e.keys,keysChanged:e.onKeysChanged,data:e.data,dataChanged:e.onDataChanged})),o.a.createElement("div",{className:"col-md-6",style:{border:"2px solid #e8e8e8",padding:0}},o.a.createElement("div",{style:{padding:"10px 17px"}},o.a.createElement("h2",{style:{marginBottom:"30px"}},"Result:"),s.length>0&&s.map((function(e,t){return e.error?o.a.createElement("div",{style:{overflowWrap:"break-word",color:"red"},key:t},e.error):o.a.createElement("div",{style:{overflowWrap:"break-word"},key:t},e)})),a.length>0&&o.a.createElement("div",{style:{marginTop:"50px",borderTop:"1px solid silver"}},o.a.createElement("h5",{style:{color:"red"}},"Errors"),o.a.createElement("ul",null,a.map((function(e,t){return o.a.createElement("li",{style:{color:"red"},key:t},e)})))))))})),A=n(138),D=n(659),U=n(140),L=n.n(U),H=(n(655),function(e){return o.a.createElement("div",{className:"pb-5"},o.a.createElement("h4",{className:"mt-5"},"Saved Contracts"),o.a.createElement(D.a,{responsive:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"check"),o.a.createElement("th",null,"Smart contract name"),o.a.createElement("th",null,"Zencode (-z)"),o.a.createElement("th",null,"Input (-a)"),o.a.createElement("th",null,"Input (-k)"),o.a.createElement("th",null,"Config (-c)"),o.a.createElement("th",null,"Edit Swagger On/Off"))),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(g.a.Check,{"aria-label":"option 1"})),o.a.createElement("td",null,"Generate keypair"),o.a.createElement("td",null,o.a.createElement("a",{href:"#"},"show")),o.a.createElement("td",null,o.a.createElement("a",{className:"link-text",href:"#",style:{color:"red",marginRight:"6px"}},"empty"),o.a.createElement(L.a,{onlabel:"api",offlabel:"manual",checked:!0,onstyle:"outline-warning",height:"3",size:"xs",offstyle:"outline-info"})),o.a.createElement("td",null,o.a.createElement("a",{className:"link-text",href:"#",style:{color:"red",marginRight:"6px"}},"empty"),o.a.createElement(L.a,{onlabel:"api",offlabel:"manual",checked:!0,onstyle:"outline-warning",height:"3",size:"xs",offstyle:"outline-info"})),o.a.createElement("td",null,o.a.createElement("a",{href:"#"},"show")),o.a.createElement("td",null,o.a.createElement("button",{type:"button",className:"btn btn-outline-dark",style:{height:"1.375rem",lineHeight:"0.5",padding:".375rem .55rem",marginRight:"2px"}},"Edit"),o.a.createElement("button",{type:"button",className:"btn btn-outline-dark",style:{height:"1.375rem",lineHeight:"0.5",padding:".375rem .55rem"}},"Swagger"),o.a.createElement(L.a,Object(A.a)({onlabel:"ON",offlabel:"OFF",checked:!0,onstyle:"outline-success",offstyle:"outline-danger",height:"3",size:"xs"},"offstyle","outline-info")))))))}),P=Object(u.g)(Object(s.b)((function(e){return{isAuthenticated:null!==e.auth.token,execute:e.zenroom.execute}}),(function(e){return{onAuth:function(t,n,a){return e(function(e,t,n){return function(a){a({type:"AUTH_START"});var r={email:e,password:t},o="/user/register";n||(o="/user/login"),x.a.post(o,r).then((function(e){console.log(e);var t=new Date((new Date).getTime()+1e3*e.data.expiresIn);localStorage.setItem("token",e.data.token),localStorage.setItem("expirationDate",t),localStorage.setItem("userId",e.data.userId),a(C(e.data.token,e.data.userId)),a(_(e.data.expiresIn))})).catch((function(e){console.log("Error from server"),console.log(e)}))}}(t,n,a))},onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem("token");if(t){var n=new Date(localStorage.getItem("expirationDate"));if(n<=new Date)e(j());else{var a=localStorage.getItem("userId");e(C(t,a)),e(_((n.getTime()-(new Date).getTime())/1e3))}}else e(j())}))},onExecute:function(){return e(k(!0))}}}))((function(e){var t=Object(r.useState)(!1),n=Object(i.a)(t,2),a=n[0],c=n[1],l=function(e){console.log("show login handler method. Setting to "+e),c(e)},s=o.a.createElement(u.d,null,o.a.createElement(u.b,{path:"/",exact:!0,component:R}),o.a.createElement(u.a,{to:"/"}));return e.isAuthenticated&&(s=o.a.createElement(u.d,null,o.a.createElement(u.b,{path:"/",exact:!0,component:R}),o.a.createElement(u.b,{path:"/profile",component:H}),o.a.createElement(u.a,{to:"/"}))),Object(r.useEffect)((function(){e.onTryAutoSignup()}),[]),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"d-flex flex-column vh-100",style:{paddingBottom:"30px"}},o.a.createElement(h,{showLogin:function(){return l(!0)},isAuthenticated:e.isAuthenticated,executeZenroom:e.onExecute}),s),a&&o.a.createElement(p,{showLogin:l,show:a,auth:e.onAuth}))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(656);var z=n(76),B=n(311),F=function(e,t){return Object(v.a)(Object(v.a)({},e),t)},M={contract:"",keys:"",data:"",result:"",error:"",execute:!1},G=function(e,t){var n={contract:t.contract};return F(e,n)},K=function(e,t){var n={keys:t.keys};return F(e,n)},V=function(e,t){var n={data:t.data};return F(e,n)},W=function(e,t){var n={execute:t.execute};return F(e,n)},X=function(e,t){var n={result:t.result};return F(e,n)},Y=function(e,t){var n={error:t.error};return F(e,n)},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONTRACT":return G(e,t);case"SET_KEYS":return K(e,t);case"SET_DATA":return V(e,t);case"SET_EXECUTE":return W(e,t);case"SET_RESULT":return X(e,t);case"SET_ERROR":return Y(e,t);default:return e}},J={token:null,userId:null,error:null,loading:!1,authRedirectPath:"/"},Q=function(e,t){return F(e,{error:null,loading:!0})},q=function(e,t){return F(e,{token:t.idToken,userId:t.userId,error:null,loading:!1})},$=function(e,t){return F(e,{error:t.error,loading:!1})},ee=function(e,t){return F(e,{token:null,userId:null})},te=function(e,t){return F(e,{authRedirectPath:t.path})},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return Q(e);case"AUTH_SUCCESS":return q(e,t);case"AUTH_FAIL":return $(e,t);case"AUTH_LOGOUT":return ee(e);case"SET_AUTH_REDIRECT_PATH":return te(e,t);default:return e}},ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||z.d,re=Object(z.c)({zenroom:Z,auth:ne}),oe=Object(z.e)(re,ae(Object(z.a)(B.a))),ce=o.a.createElement(s.a,{store:oe},o.a.createElement(m.a,null,o.a.createElement(P,null)));l.a.render(ce,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[315,1,2]]]);
//# sourceMappingURL=main.8d8d9343.chunk.js.map